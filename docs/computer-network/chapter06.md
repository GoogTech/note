# 应用层

### 网络应用模型

- 客户/服务器模型

	- 主机（Client）：服务请求方，必须知道服务器程序地址
	- 服务器（Server）：服务提供方，不需要知道客户程序的地址

- P2P模型

	- 每个结点既可以作为客户机，也可以作为服务器
	- 任意一对计算机，即对等方（Peer），直接相互通信
	- 优缺点

		- 优点为：减轻计算压力，消除依赖性，提高系统效率和资源利用率
		- 缺点为：获取服务的同时还要提供服务，故导致占用较多的内存，影响整机速度

### 域名系统（DNS）

Domain Name System

- 用于将具有特定含义的主机名转换为便于机器处理的IP地址
- 采用客户/服务器模型、协议运行在UDP之上、使用 53 号端口
- 顶级域名分类

	- 国家顶级域名（nTLD）：例如".cn"、".us"、".uk"
	- 通用顶级域名（gTLD）：例如".com"、".cn"、".net"
	- 基础结构域名：例如"arpa"（IP —>Domain）

- 域名服务器

  Top Level Domain(**TLD**)

	- 根域名服务器

		- 负责管理顶级域，告诉本地域名服务器下一步应当找哪个顶级域名服务器进行查询

	- 顶级域名服务器

		- 负责管理在该服务器上注册的所有二级域名，给出相应的IP地址或下一步域名服务器的IP地址

	- 权限域名服务器

		- 每台主机必须在此进行登记，故其总能将其管辖的主机名转换成该主机的IP地址

	- 本地域名服务器

		- 负责接收每台主机发出的DNS查询请求报文，替代主机查询给定域名的IP地址

- 解析方式

	- 递归与迭代相结合的查询
	- 递归查询（对根域名服务器造成的负载过大，几乎不适用）

### 文件传输协议（FTP）

File Transfer Protocol

- 为因特网上使用得最广泛的文件传输协议
- 功能

	- 文件传输、文件管理、文件共享

- 服务器进程

	- 主进程：负责接收新的请求
	- 若干从属进程：负责处理单个请求

- 服务器连接

	- 控制连接

		- 端口号为21，用来传输控制信息
		- 控制信息都以 7 位的 ASCII 格式进行传送

	- 数据连接

		- 端口号位20，用来连接客户端和服务端的数据传送进程
		- 主动模式PORT

			- 传输数据是 "服务器" 连接到 "客户端" 的端口
			- 使用TCP 20端口

		- 被动模式PASV

			- 传输数据是 "客户端" 连接到 "服务器" 的端口
			- 端口号由服务器和客户端自行协商决定

### 电子邮件（E-mail）

- 用户代理（UA）

	- 是指运行在PC上的程序，如电子邮件客户端软件

- 邮件服务器

	- 功能为发送和接收邮件，采用C/S工作方式

- 协议

	- 发送协议（SMTP）

	  Simple Mail Transfer Protocol

		- 使用TCP连接、端口号为25、采用C/S工作方式
		- 用于用户代理向邮件服务器发送邮件或在邮件服务之间发送邮件
		- 因仅限于传送 7 位ASCII码，故提出了多用途网际邮件扩充（MIME）使得传输内容丰富多彩

	- 接收协议（POP3）

	  Post Office Protocol

		- 使用TCP连接、端口号为110、采用C/S工作方式
		- 用于用户代理从邮件服务器读取邮件
		- 另一个邮件读取协议为因特网报文存取协议（IMAP），适用于多音频或视频的大邮件

### 万维网（WWW）

World Wide Web

- 统一资源定位符（URL）

	-  : //  :  / 

- 超文本标记语言（HTML）

	- 以一种约定的标记对页面上的各种信息、格式进行描述

- 超文本传输协议（HTTP）

	- 无连接、无状态

		- 无连接：通信双方在交换HTTP报文之前不需要先建立HTTP连接
		- 无状态：服务器对曾经来访的客户并无记忆，进而使得其更易支持大量并发的HTTP请求

	- 非持久连接、持久连接

		- 非持久连接：每个网页元素对象的传输都需要单独建立一个TCP连接
		- 持久连接（HTTP/1.1）

			- 流水线：客户可以逐个地连续发出对各个引用对象的请求
			- 非流水线：客户在收到响应后才能发出下一个请求（浪费服务器资源）

	- 报文

		- 请求报文：从客户向服务器发送的请求报文
		- 响应报文：从服务器到客户的回答
